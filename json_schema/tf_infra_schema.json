{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "required": ["infra", "infra_enabled"],
    "additionalProperties": false,
    "properties": {
      "infra_enabled": {
        "type": "boolean"
      },
      "infra": {
        "type": "object",
        "required": ["rg", "azure_location", "networks", "vms"],
        "additionalProperties": false,
        "properties": {
          "rg": {
            "type": "string",
            "pattern": ".*-rg$"
          },
          "azure_location": {
            "type": "string",
            "enum": [
              "eastus",
              "eastus2",
              "westus",
              "westus2",
              "centralus",
              "northcentralus",
              "southcentralus",
              "northeurope",
              "westeurope",
              "southeastasia",
              "eastasia",
              "australiaeast",
              "australiasoutheast",
              "japaneast",
              "japanwest",
              "koreacentral",
              "koreasouth",
              "canadacentral",
              "canadaeast",
              "brazilsouth",
              "brazilsoutheast",
              "southafricanorth",
              "southafricawest",
              "uaecentral",
              "uaenorth",
              "indiawest",
              "indiacentral",
              "indiasouth",
              "ukwest",
              "uksouth",
              "switzerlandnorth",
              "switzerlandwest",
              "germanywestcentral",
              "germanynorth",
              "norwayeast",
              "norwaywest",
              "francecentral",
              "francesouth",
              "italycentral",
              "italysouth",
              "polandcentral"
            ]
          },
          "networks": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string",
                      "pattern": ".*-vnet$"
                    },
                    "net": {
                      "type": "string"
                    },
                    "subnets": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string",
                            "pattern": ".*-snet$"
                          },
                          "net": {
                            "type": "string"
                          }
                        },
                        "required": ["name", "net"],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": ["name", "net", "subnets"],
                  "additionalProperties": false
                }
              },
              "vms": {
                "type": "array",
                "required": ["vm_name", "vnet_name", "subnet_name", "vm_size", "ssh_username", "ssh_pubkey", "unique_vm_alias"],
                "items": {
                  "type": "object",
                  "properties": {
                    "vm_name": {
                      "type": "string"
                    },
                    "unique_vm_alias": {
                      "type": "string"
                    },
                    "vnet_name": {
                      "type": "string"
                    },
                    "subnet_name": {
                      "type": "string"
                    },
                    "vm_size": {
                      "type": "string"
                    },
                    "ssh_username": {
                      "type": "string"
                    },
                    "ssh_pubkey": {
                      "type": "string",
                      "pattern": "^ssh-rsa [A-Za-z0-9+/=]+$"
                    }
                  }
                }
              }
      }
    }
  }

}
  